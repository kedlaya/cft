<section xml:id="sec_kronweb">
  <title>The Kronecker-Weber theorem</title>
  <introduction>
    <paragraphs>
      <title>Reference</title>
        <p>
          Our approach follows <xref ref="bib-Washington"/>, Chapter 14.
          A variety of other methods can be found in other texts.
        </p>
    </paragraphs>
  </introduction>
  <subsection>
    <title>Abelian extensions of <m>\QQ</m></title>
    <definition xml:id="D_abelian_extension">
      <p>
        An <term>abelian extension</term> of a field is a Galois extension with abelian Galois group.
        An example of an abelian extension of <m>\QQ</m> is the cyclotomic field <m>\QQ(\zeta_n)</m>
        (where <m>n</m> is a positive integer and <m>\zeta_n</m> is a primitive <m>n</m>-th root of unity),
        whose Galois group is <m>(\ZZ/n\ZZ)^*</m>, or any subfield thereof.
        Amazingly, <xref ref="T_Kronecker-Weber"/> implies that there are no other examples!
      </p>
    </definition>
    <theorem xml:id="T_Kronecker-Weber">
      <title>Kronecker-Weber</title>
      <statement>
        <p>
          If <m>K/\QQ</m> is a finite abelian extension,
          then <m>K \subseteq \QQ(\zeta_n)</m> forg some positive integer <m>n</m>.
        </p>
      </statement>
      <proof>
        <p>
          See <xref ref="lem-kronweb-local-to-global"/>.
        </p>
      </proof>
    </theorem>
    <example>
      <p>
        A fundamental example of <xref ref="T_Kronecker-Weber"/> is that every quadratic extension of <m>\QQ</m> is contained in a cyclotomic field.
        This was known to Gauss via what we now call <term>Gauss sums</term>, and forms the basis of one of his proofs of quadratic reciprocity.
        It is this proof in particular that generalizes to Artin reciprocity (<xref ref="T-Artin-reciprocity"/>). See also <xref ref="exer-Gauss-sums"/>
        and <xref ref="exer-Artin-to-quadratic"/>.
      </p>
    </example>
    <definition xml:id="D_conductor">
      <p>
        The smallest <m>n</m> such that <m>K \subseteq \QQ(\zeta_n)</m> is called the
        <term>conductor</term> of <m>K/\QQ</m>.
        It plays an important role in the splitting behavior of primes of <m>\QQ</m> in <m>K</m>,
        as we will see a bit later.
      </p>
    </definition>
    <p>
      We will prove <xref ref="T_Kronecker-Weber"/> in the next few lectures.
      Our approach will be to deduce it from a local analogue (see <xref ref="T_local_Kronecker-Weber2"/>).
    </p>
    <theorem xml:id="T_local_Kronecker-Weber1">
      <title>Local Kronecker-Weber</title>
      <statement>
        <p>
          If <m>K/\QQ_p</m> is a finite abelian extension, then <m>K \subseteq \QQ_p(\zeta_n)</m> for some <m>n</m>, where <m>\zeta_n</m> is a primitive <m>n</m>-th root of unity.
        </p>
      </statement>
      <proof>
        <p>
          See <xref ref="T_local_Kronecker-Weber2"/>.
        </p>
      </proof>
    </theorem>
    <p>
      Before proceeding, it is worth noting explicitly a nice property of abelian extensions that we will exploit below.
    </p>
    <remark xml:id="R-decomposition-inertia">
      <p>
        Let <m>L/K</m> be a Galois extension with Galois group <m>G</m>,
        let <m>\gothp</m> be a prime of <m>K</m>, let <m>\gothq</m> be a prime of <m>L</m> over <m>\gothp</m>,
        and let <m>G_{\gothq}</m> and <m>I_{\gothq}</m> be the decomposition and inertia groups of <m>\gothq</m>, respectively.
        Then any other prime <m>\gothq'</m> over <m>\gothp</m> can be written as <m>\gothq^g</m> for some <m>g \in G</m>,
        and the decomposition and inertia groups of <m>\gothq'</m> are the conjugates <m>g^{-1} G_{\gothq} g</m> and <m>g^{-1} I_{\gothq} g</m>, respectively.
        (Note: my Galois actions will always be <em>right</em> actions, denoted by superscripts.)
      </p>
      <p>
        If <m>L/K</m> is <em>abelian</em>, though, these conjugations have no effect.
        So it makes sense to talk about <em>the</em> decomposition and inertia groups of <m>\gothp</m> itself!
      </p>
    </remark>
  </subsection>
  <subsection>
    <title>A reciprocity law</title>
    <p>
      Assuming the Kronecker-Weber theorem,
      we can deduce strong results about the way primes of <m>\QQ</m> split in an abelian extension.
    </p>
    <definition xml:id="D_cyclotomic_reciprocity">
      <p>
        Suppose <m>K/\QQ</m> is abelian, with conductor <m>m</m>.
        Then we get a surjective homomorphism
        <me>
          (\ZZ/m\ZZ)^* \cong \Gal(\QQ(\zeta_m)/\QQ) \to \Gal(K/\QQ)
        </me>.
      </p>
      <p>
        On the other hand, suppose <m>p</m> is a prime not dividing <m>m</m>,
        so that <m>K/\QQ</m> is unramified above <m>p</m>.
        As noted above,
        there is a well-defined decomposition group <m>G_p \subseteq \Gal(K/\QQ)</m>.
        Since there is no ramification above <m>p</m>,
        the corresponding inertia group is trivial, so <m>G_p</m> is generated by a Frobenius element <m>F_p</m>, which modulo any prime above <m>p</m>, acts as <m>x \mapsto x^p</m>.
        We can formally extend the map <m>p \mapsto F_p</m> to a homomorphism from <m>S_m</m>, the subgroup of <m>\QQ^*</m> generated by all primes not dividing <m>m</m>, to <m>\Gal(K/\QQ)</m>.
        This is called the <term>Artin map</term> of <m>K/\QQ</m>.
      </p>
      <p>
        The punchline is that the Artin map factors through the map <m>(\ZZ/m\ZZ)^* \to \Gal(K/\QQ)</m> we wrote down above!
        Namely, note that the image of <m>r</m> under the latter map takes <m>\zeta_m</m> to <m>\zeta_m^r</m>.
        For this image to be equal to <m>F_p</m>,
        we must have <m>\zeta_m^r \equiv \zeta_m^p \pmod{\gothp}</m> for some prime <m>\gothp</m> of <m>K</m> above <m>p</m>.
        But <m>\zeta_m^r (1 - \zeta_m^{r-p})</m> is only divisible by primes above <m>m</m>
        (see <xref ref="exer-factors-of-1-minus-zeta"/>) unless <m>r-p \equiv 0 \pmod{m}</m>.
        Thus <m>F_p</m> must be equal to the image of <m>p</m> under the map <m>(\ZZ/m\ZZ)^* \to \Gal(K/\QQ)</m>.
      </p>
    </definition>
    <remark>
      <p>
        The <term>Artin reciprocity law</term>
        states that a similar phenomenon arises for any abelian extension of any number field;
        that is, the Frobenius elements corresponding to various primes are governed by the way the primes
        <q>reduce</q> modulo some other quantity.
        There are several complicating factors in the general case, though.
        <ul>
          <li>
            Prime ideals in a general number field are not always principal,
            so we can't always take a generator and reduce it modulo something.
          </li>
          <li>
            There can be lots of units in a general number field, so even when a prime ideal is principal,
            it is unclear which generator to choose.
          </li>
          <li>
            It is not known in general how to explicitly construct generators for all of the abelian extensions of a general number field.
          </li>
        </ul>
        Thus our approach will have to be a bit more indirect. See <xref ref="ch_statements"/> for the beginning of the story.
      </p>
    </remark>
  </subsection>
  <subsection>
    <title>Reduction to the local case</title>
    <p>
      Our reduction of Kronecker-Weber to local Kronecker-Weber relies on a key result typically seen in a first course on algebraic number theory.
    </p>
    <theorem xml:id="T_Minkowski">
      <title>Minkowski</title>
      <statement>
        <p>
          There are no nontrivial extensions of <m>\QQ</m> which are unramified everywhere.
        </p>
      </statement>
      <proof>
        <p>
          See for instance <xref ref="bib-Neukirch"/> III.2.
        </p>
      </proof>
    </theorem>
    <p>
      Using Minkowski's theorem, let us deduce the Kronecker-Weber theorem from the local Kronecker-Weber theorem.
    </p>
    <lemma xml:id="lem-kronweb-local-to-global">
      <statement>
        <p>
          The local Kronecker-Weber theorem (<xref ref="T_local_Kronecker-Weber1"/>) implies the Kronecker-Weber theorem (<xref ref="T_Kronecker-Weber"/>).
        </p>
      </statement>
      <proof>
        <p>
          For each prime <m>p</m> over which <m>K</m> ramifies,
          pick a prime <m>\gothp</m> of <m>K</m> over <m>p</m>;
          by local Kronecker-Weber
          (<xref ref="T_local_Kronecker-Weber1"/>),
          <m>K_{\gothp} \subseteq \QQ_p(\zeta_{n_p})</m> for some positive integer <m>n_p</m>.
          Let <m>p^{e_p}</m> be the largest power of <m>p</m> dividing <m>n_p</m>,
          and put <m>n = \prod_p p^{e_p}</m>.
          (This is a finite product since only finitely many primes ramify in <m>K</m>.)
        </p>
        <p>
          Write <m>L = K(\zeta_n)</m>; we will prove that <m>K \subseteq \QQ(\zeta_n)</m>
          by proving that <m>L = \QQ(\zeta_n)</m>.
          Form the completion <m>L_\gothq</m> for some prime <m>\gothq</m> over <m>p</m>;
          it is contained in <m>\QQ_p(\zeta_{\lcm(n,n_p)})</m>.
          Let <m>I_p</m> be the inertia group of <m>p</m> in <m>L</m>;
          the fixed fixed <m>U</m> of <m>I_p</m> on <m>L_{\gothq}</m> is the maximal unramified subextension of
          <m>L_\gothq</m>. Since <m>\QQ_p(\zeta_e)</m> is unramified over <m>\QQ_p</m> for any positive integer <m>e</m>
          coprime to <m>p</m>, we have <m>L_{\gothq} = U(\zeta_{p^{e_p}})</m>
          and so <m>I_p \cong \Gal(L_\gothq/U) \subseteq (\ZZ/p^{e_p}\ZZ)^*</m>.
          Let <m>I</m> be the group generated by all of the <m>I_p</m>; then
          <me>
            |I| \leq \prod |I_p| \leq \prod \phi(p^{e_p}) = \phi(n) = [\QQ(\zeta_n):\QQ]
          </me>.
        </p>
        <p>
          On the other hand,
          the fixed field of <m>I</m> is an everywhere unramified extension of <m>\QQ</m>,
          which can only be <m>\QQ</m> itself by Minkowski's theorem.
          That is, <m>I = \Gal(L/\QQ)</m>.
          But then
          <me>
            [L:\QQ] = |I| \leq [\QQ(\zeta_n):\QQ],
          </me>
          and <m>\QQ(\zeta_n) \subseteq L</m>,
          so we must have <m>\QQ(\zeta_n) = L</m> and <m>K \subseteq \QQ(\zeta_n)</m>,
          as desired.
        </p>
      </proof>
    </lemma>
  </subsection>
  <exercises>
    <title>Exercises</title>
    <exercise>
      <statement>
        <p>
          Prove that the ring of integers in <m>\QQ(\zeta_n)</m> equals <m>\ZZ[\zeta_n]</m>.
        </p>
      </statement>
      <hint>
        <p>
          For <m>n</m> a power of a prime <m>p</m>, the minimal polynomial of <m>\zeta_n</m> is the cyclotomic polynomial
          <m>\Phi_n(x) = x^{(p-1)n/p} + \cdots + x^{n/p} + 1</m>; use the polynomial <m>\Phi_n(x-1)</m> to show that
          <m>1-\zeta_n</m> generates a prime ideal. For the general case, show that if <m>K</m> and <m>L</m> are linearly disjoint
          extensions of <m>\QQ</m> with coprime discriminants, then <m>\gotho_{KL} = \gotho_K \gotho_L</m>.
        </p>
     </hint>
    </exercise>
    <exercise xml:id="exer-Gauss-sums">
      <statement>
        <p>
          For <m>m \in \ZZ</m> not a perfect square, determine the conductor of <m>\QQ(\sqrt{m})</m>.
        </p>
      </statement>
      <hint>
        <p>
          First show that for <m>p</m> prime, <m>\QQ(\sqrt{(-1)^{(p-1)/2} p})</m> has conductor <m>p</m>.
        </p>
      </hint>
    </exercise>
    <exercise xml:id="exer-Artin-to-quadratic">
      <statement>
        <p>
          Using <xref ref="exer-Gauss-sums"/>, recover the law of quadratic reciprocity from the Artin reciprocity law.
        </p>
      </statement>
    </exercise>
    <exercise xml:id="exer-factors-of-1-minus-zeta">
      <statement>
        <p>
          Prove that if <m>m,n</m> are coprime integers in <m>\ZZ</m>,
          then <m>1 - \zeta_m</m> and <m>n</m> are coprime in <m>\ZZ[\zeta_m]</m>.
        </p>
      </statement>
      <hint>
        <p>
          Look at the polynomial <m>(1-x)^m-1</m> modulo a prime divisor of <m>n</m>.
        </p>
      </hint>
    </exercise>
    <exercise>
      <statement>
        <p>
          Prove that if <m>m</m> is not a prime power, then <m>1-\zeta_m</m> is a unit in <m>\ZZ[\zeta_m]</m>.
        </p>
      </statement>
    </exercise>
    <exercise>
      <statement>
        <p>
          Let <m>p</m> be an odd prime. Prove that <m>\ZZ[\zeta_p]^*</m> is generated by
          <m>\zeta_p</m> and <m>\ZZ[\zeta_p + \zeta_p^{-1}]^*</m>.
        </p>
      </statement>
      <hint>
        <p>
          By Dirichlet's units theorem, the index <m>[\ZZ[\zeta_p]^*:\ZZ[\zeta_p+\zeta_p^{-1}]^*]</m> is finite.
          For <m>\alpha \in \ZZ[\zeta_p]^*</m>, the ratio <m>\alpha/\overline{\alpha}</m> is an algebraic integer having absolute value <m>1</m>
          under each complex embedding, and hence is a root of unity by Kronecker's theorem.
        </p>
      </hint>
    </exercise>
  </exercises>
</section>
