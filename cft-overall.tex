\documentclass{amsbook}
\usepackage{amsmidx}
\usepackage{url}
\usepackage[all]{xy}

\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{cor}[theorem]{Corollary}
\newtheorem{prop}[theorem]{Proposition}

\def\AA{\mathbb{A}}
\def\CC{\mathbb{C}}
\def\FF{\mathbb{F}}
%\def\NN{\mathbb{N}}
\def\PP{\mathbb{P}}
\def\QQ{\mathbb{Q}}
\def\RR{\mathbb{R}}
\def\ZZ{\mathbb{Z}}
\def\kbar{\overline{k}}
\def\gotha{\mathfrak{a}}
\def\gothb{\mathfrak{b}}
\def\gothm{\mathfrak{m}}
\def\gotho{\mathfrak{o}}
\def\gothp{\mathfrak{p}}
\def\gothq{\mathfrak{q}}
\def\gothr{\mathfrak{r}}

\DeclareMathOperator{\ab}{ab}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Cl}{Cl}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\Cor}{Cor}
\DeclareMathOperator{\cyc}{cyc}
\DeclareMathOperator{\disc}{Disc}
\DeclareMathOperator{\fin}{fin}
\DeclareMathOperator{\Fix}{Fix}
\DeclareMathOperator{\Frob}{Frob}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\Hom}{Hom} 
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\Inf}{Inf}
\DeclareMathOperator{\inv}{inv}
\DeclareMathOperator{\Norm}{Norm}
\DeclareMathOperator{\Real}{Re}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\sep}{sep}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\smcy}{smcy}
\DeclareMathOperator{\Trace}{Trace}
\DeclareMathOperator{\unr}{unr}
\DeclareMathOperator{\Ver}{Ver}

\def\head#1{\medskip \noindent \textbf{#1}.}

\begin{document}

\title{Notes on class field theory (updated 17 Mar 2017)}
\author{Kiran S. Kedlaya}
\address{Department of Mathematics, University of California, San Diego}
\email{kedlaya@ucsd.edu}

\maketitle
\frontmatter

\tableofcontents

\chapter*{Preface}

This text is a lightly edited version of the lecture notes of a course on class field theory (Math 254B)
that I gave at
UC Berkeley in the spring of 2002. To describe the scope of the course, I can do no better than to quote from the original syllabus:

\begin{quote}
Class field theory, the study of abelian extensions of number fields, was a crowning achievement of number theory in the first half of the 20th century. It brings together, in a unified fashion, the quadratic and higher reciprocity laws of Gauss, Legendre et al, and vastly generalizes them. Some of its consequences (e.g., the Chebotarev density theorem) apply even to nonabelian extensions.

Our approach in this course will be to begin with the formulations of the statements of class field theory, omitting the proofs (except for the Kronecker-Weber theorem, which we prove first). We then proceed to study the cohomology of groups, an important technical tool both for class field theory and for many other applications in number theory. From there, we set up a local form of class field theory, then proceed to the main results. 
\end{quote}

The assumed background for the course was a one-semester graduate course in algebraic number theory,
including the following topics: 
number fields and rings of integers; structure of the class and unit groups; splitting, ramification,
and inertia of prime ideals under finite extensions; different and discriminant; basic properties of local fields.
In fact, most of the students in Math 254B had attended such a course that I gave the previous
semester (Math 254A) based on chapters I, II, and III of Neukirch's \textit{Algebraic Number Theory}; for that reason, it was natural to use that book as a primary reference. 
However, no special features of that presentation are assumed, so just about any graduate-level text on algebraic
number theory (e.g., Fr\"ohlich-Taylor, Janusz, Lang) should provide suitable background.

After the course ended, I kept the lecture notes posted on my web site in their originally written, totally uncorrected state.
Despite their roughness, I heard back from many people over the years who had found them useful;
as a result, I decided to prepare a corrected version of the notes. In so doing, I made a conscious decision
to suppress any temptation to modify 
the presentation with the benefit of hindsight, or to fill in additional material to make the text more self-contained.
This decision, while largely dictated by lack of time and energy, was justified by the belief that the
informality of the original notes contributed to their readibility. In other words, this is not intended as a standalone
replacement for a good book on class field theory!

I maintain very few claims of originality concerning the presentation of the material. 
Besides Neukirch, the main source of inspiration was Milne's lecture notes on algebraic number theory (see \url{http://jmilne.org/math/CourseNotes/cft.html}, version 3.10; note that a more recent version is available, but we have not verified that all references remain valid). These two sources are referenced simply as ``Neukirch'' and ``Milne,'' with additional references described more explicitly  as they occur.
The basic approach may be summarized as follows: I follow Milne's treatment of local class field theory using group cohomology, then follow Neukirch to recast local class field theory in the style of Artin-Tate's class formations, then reuse the same framework to obtain global class field theory. 

This document is not yet in a final state. Consequently, corrections and comments are welcome. Thanks to Zonglin Jiang, Justin Lacini, and Zongze Liu for their feedback on previous drafts.

\mainmatter
\part{Trailer: Abelian extensions of the rationals}

\chapter{The Kronecker-Weber theorem}
\input{kronweb}

\chapter{Kummer theory}
\label{chap:Kummer theory}
\input{kummer}

\chapter{The local Kronecker-Weber theorem}
\input{localkronweb}

\part{The statements of class field theory}

\chapter{The Hilbert class field}
\input{hilbert}

\chapter{Generalized ideal class groups and the Artin reciprocity law}
\input{artinrec}

\chapter{The principal ideal theorem}
\label{chap:principal}
\input{principal}

\chapter{Zeta functions and the Chebotarev density theorem}
\input{zeta}

\part{Cohomology of groups}

\chapter{Cohomology of finite groups I: abstract nonsense}
\input{cohom1}

\chapter{Cohomology of finite groups II: concrete nonsense}
\input{cohom2}

\chapter{Homology of finite groups}
\label{chap:homology}
\input{homology}

\chapter{Profinite groups and infinite Galois theory}
\input{profinite}

\part{Local class field theory}

\chapter{Overview of local class field theory}
\input{localrecip}

\chapter{Cohomology of local fields: some computations}
\label{chap:localcomp}
\input{localcomp}

\chapter{Local class field theory via Tate's theorem}
\input{tatethm}

\chapter{Abstract class field theory}
\label{chap:abstractcft}
\input{abstractcft}

\part{The adelic formulation}

\chapter{Ad\`eles and id\`eles}
\input{adeles}

\chapter{Ad\`eles and id\`eles in field extensions}
\input{adeles-rel}

\chapter{The adelic reciprocity law and Artin reciprocity}
\input{adelic-recip}

\part{The main results}

\chapter{Cohomology of the id\`eles I: the ``First Inequality''}
\input{ideles-cohom1}

\chapter{Cohomology of the id\`eles II: the ``Second Inequality''}
\input{ideles-cohom2}

\chapter{An ``abstract'' reciprocity map}
\input{abstr-recip}

\chapter{The existence theorem}
\input{existence}

\chapter{The connection with local reciprocity}
\label{chap:connection}
\input{connection}

\part{Coda}

\chapter{Parting thoughts}
\input{parting}

\end{document}