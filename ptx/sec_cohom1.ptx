<section xml:id="sec_cohom1">
  <title>Cohomology of finite groups I: abstract nonsense</title>
  <introduction>
    <paragraphs>
      <title>Reference</title>
      <p>
        Milne, II.1.
        See Serre, <em>Galois Cohomology</em>
        for a much more general presentation.
        (We will generalize ourselves from finite to profinite groups a bit later on.)
        Warning: some authors
        (like Milne, and Neukirch for the most part)
        put group actions on the left and some
        (like Neukirch in chapter IV, and myself here)
        put them on the right.
        Of course, the theory is the same either way!
      </p>
    </paragraphs>
  </introduction>
  <subsection>
    <title>Caveat</title>
    <p>
      This material may seem a bit dry.
      If so, don't worry;
      only a small part of the theory will be relevant for class field theory.
      However, it doesn't make sense to learn that small part without knowing what it is a part of!
    </p>
    <definition>
      Let <m>G</m> be a finite group and <m>A</m> an abelian group
      (itself not necessarily finite)
      with a right <m>G</m>-action,
      also known as a <m>G</m>-module.
      I'll write the <m>G</m>-action as a superscript,
      i.e., the image of the action of <m>g</m> on <m>m</m> is <m>m^g</m>.
      Alternatively,
      <m>A</m> can be viewed as a right module for the group algebra <m>\ZZ[G]</m>.
      A <term>homomorphism</term> of <m>G</m>-modules
      <m>\phi: M \to N</m> is a homomorphism of abelian groups that is compatible with the <m>G</m>-actions:
      i.e., <m>\phi(m^g) = \phi(m)^g</m>.
      (For those keeping score,
      the category of <m>G</m>-modules is an abelian category.)
    </definition>
    <p>
      We would like to define some invariants of the pair <m>(G, A)</m> that we can use to get information about <m>G</m> and <m>A</m>.
      We will use the general methodology of homological algebra to do this.
      Before doing so,
      though, we need a few lemmas about <m>G</m>-modules.
    </p>
    <definition>
      A <m>G</m>-module <m>M</m> is <term>injective</term>
      if for every inclusion <m>A \subset B</m> of <m>G</m>-modules and every <m>G</m>-module homomorphism <m>\phi: A \to M</m>,
      there is a homomorphism <m>\psi: B \to M</m> that extends <m>\phi</m>.
    </definition>
    <lemma xml:id="L_enough_injectives">
      <statement>
        <p>
          Every <m>G</m>-module can be embedded into some injective <m>G</m>-module.
          (That is, the category of <m>G</m>-modules has enough injectives.)
        </p>
      </statement>
    </lemma>
    <proof>
      <p>
        Exercise.
      </p>
    </proof>
    <p>
      In particular, any <m>G</m>-module <m>M</m> admits an
      <term>injective resolution</term>: a complex
      <me>
        0 \to M \to I_0 \stackrel{d_0}{\to} I_1 \stackrel{d_1}{\to} I_2 \stackrel{d_2}{\to} \dots
      </me>
    </p>
    <p>
      (that is, <m>d_{i+1} \circ d_i = 0</m> for all <m>i</m>) in which each <m>I_i</m> is injective and the complex itself is <em>exact</em>:
      <m>\im d_i = \ker d_{i+1}</m>.
      (To wit, embed <m>M</m> into <m>I_0</m>,
      embed <m>I_0/M</m> into <m>I_1</m>, et cetera.)
    </p>
    <p>
      Given a <m>G</m>-module <m>M</m>,
      let <m>M^G</m> be the abelian group of <m>G</m>-invariant elements of <m>M</m>:
      <me>
        M^G = \{m \in M: m^g = m  \forall g \in G\}
      </me>.
    </p>
    <p>
      The functor <m>M \to M^G</m> from <m>G</m>-modules to abelian groups is left exact but not right exact:
      if <m>0 \to M' \to M \to M'' \to 0</m> is an exact sequence,
      then <m>0 \to (M')^G \to M^G \to (M'')^G</m> is exact,
      but <m>M^G \to (M'')^G</m> may not be exact. (Example:
      take the sequence <m>0 \to \ZZ/p\ZZ \to \ZZ/p^2\ZZ \to \ZZ/p\ZZ \to 0</m> of <m>G</m>-modules for <m>G = \ZZ/p\ZZ</m>,
      which acts on the middle factor by <m>a^g = a(1+pg)</m>.
      Then <m>M^G \to (M'')^G</m> is the zero map but <m>(M'')^G</m> is nonzero.)
    </p>
    <p>
      This is the general situation addressed by homological algebra:
      it provides a canonical way to extend the truncated exact sequence <m>0 \to (M')^G \to M^G \to (M'')^G</m>.
      (Or if you prefer,
      it helps measure the failure of exactness of the <m>G</m>-invariants functor.)
      To do this, given <m>M</m> and an injective resolution as above,
      take <m>G</m>-invariants: the result
      <me>
        0 \to I_0^G \stackrel{d_0}{\to} I_1^G \stackrel{d_1}{\to} I_2^G \stackrel{d_2}{\to} \dots
      </me>
      is still a complex, but no longer exact.
      We turn this failure into success by defining the <m>i</m>-th cohomology group as the quotient
      <me>
        H^i(G, M) = \ker(d^i)/\im(d^{i-1})
      </me>.
    </p>
    <p>
      By convention, we let <m>d_{-1}</m> be the map
      <m>0 \to I_0^G</m>, so <m>H^0(G,M)=M^G</m>.
    </p>
    <p>
      Given a homomorphism <m>f: M \to N</m> and a injective resolution <m>0 \to N \to J_0 \to J_1 \to \cdots</m>,
      there exists a commutative diagram
    </p>
    <figure xml:id="fig-cohom1-1">
    <image xml:id="img-cohom1-1">
    <latex-image>
    \xymatrix{ 0 \ar[r] &amp; M \ar[r] \ar_f[d] &amp; I_0 \ar^{d_0}[r] \ar_{f_0}[d] &amp; I_1  \ar_{f_1}[d] \ar^{d_1}[r] &amp; I_2 \ar_{f_2}[d] \ar^{d_2}[r] &amp; \cdots \\
    0 \ar[r] &amp; N \ar[r] &amp; J_0 \ar^{d_0}[r] &amp; J_1 \ar^{d_1}[r] &amp;  J_2 \ar^{d_2}[r] &amp; \cdots}
    </latex-image>
    </image>
    </figure>
    <p>
      and likewise after taking <m>G</m>-invariants,
      so we get maps <m>H^i(f): H^i(G, M) \to H^i(G, N)</m>.
    </p>
    <lemma xml:id="L_injective_resolutions_to_cohomology_maps">
      <statement>
        <p>
          The map <m>H^i(f)</m> does not depend on the choice of the <m>f_i</m>
          (given the choices of injective resolutions).
        </p>
      </statement>
    </lemma>
    <proof>
      <p>
        This proof is a bit of
        <q>abstract nonsense</q>. It suffices to check that if <m>f=0</m>,
        then the <m>H^i(f)</m> are all zero regardless of what the <m>f_i</m> are.
        In that case,
        it turns out one can construct maps <m>g_i: I_{i+1} \to J_i</m>
        (and by convention <m>g_{-1} = 0</m>)
        such that <m>f_i = g_i \circ d_i + d_{i-1} \circ g_{i-1}</m>.
        (Such a set of maps is called a <em>homotopy</em>.)
        Details left as an exercise. (Warning:
        the diagonal arrows in the diagram below don't commute!)
      </p>
    <figure xml:id="fig-cohom1-2">
    <image xml:id="img-cohom1-2">
    <latex-image>
    \xymatrix{ 0 \ar[r] &amp; M \ar[r] \ar_f[d] &amp; I_0 \ar^{d_0}[r] \ar_{f_0}[d] &amp; I_1  \ar_{g_0}[dl] \ar_{f_1}[d] \ar^{d_1}[r] &amp; \ar_{g_1}[dl] I_2 \ar_{f_2}[d] \ar^{d_2}[r] &amp; \cdots \\
    0 \ar[r] &amp; N \ar[r] &amp; J_0 \ar^{d_0}[r] &amp; J_1 \ar^{d_1}[r] &amp;  J_2 \ar^{d_2}[r] &amp; \cdots}
    </latex-image>
    </image>
    </figure>
    </proof>
    <p>
      In particular, if <m>M=N</m> and <m>f</m> is the identity,
      we get a canonical map between
      <m>H^i(G,M)</m> and <m>H^i(G,N)</m> for each <m>i</m>.
      That is, the groups <m>H^i(G,M)</m> are well-defined independent of the choice of the injective resolution.
      Likewise, the map <m>H^i(f)</m> is also independent of the choice of resolutions.
    </p>
    <p>
      If you know any homological algebra,
      you'll recognize what comes next:
      given a short exact sequence <m>0 \to M' \to M \to M'' \to 0</m> of <m>G</m>-modules,
      there is a canonical long exact sequence
      <md>
        <mrow>0 \to H^0(G, M') \to \cdots \to H^i(G, M'') \stackrel{\delta_i}{\to}</mrow>
        <mrow>\stackrel{\delta_i}{\to} H^{i+1}(G, M') \to H^{i+1}(G, M) \to H^{i+1}(G,M'') \to \cdots,</mrow>
      </md>
      where the <m>\delta_i</m> are certain
      <q>connecting homomorphisms</q>
      (or
      <q>snake maps</q>).
      I won't punish you with the proof of this;
      if you've never seen it before,
      deduce it yourself from the Snake Lemma. (For the proof of the latter,
      engage in
      <q>diagram chasing</q>, or see the movie <url href="https://www.youtube.com/watch?v=etbcKWEKnvg"><em>It's My Turn</em></url>.
      To define <m>\delta</m>: given <m>x \in \ker(f_2) \subseteq M_2</m>,
      lift <m>x</m> to <m>M_1</m>, push it into <m>N_1</m> by <m>f_1</m>,
      then check that the image has a preimage in <m>N_0</m>.
      Then verify that the result is well-defined, et cetera.)
    </p>
    <lemma xml:id="L_snake_lemma">
      <title>Snake Lemma</title>
      <statement>
        <p>
          Given a commuting diagram
        </p>
    <figure xml:id="fig-cohom1-3">
    <image xml:id="img-cohom1-3">
    <latex-image>
    \xymatrix{
    0 \ar[r] &amp; M_0 \ar[r] \ar^{f_0}[d] &amp; M_1 \ar[r] \ar^{f_1}[d] &amp; M_2 \ar[r] \ar^{f_2}[d] &amp; 0 \\
    0 \ar[r] &amp; N_0 \ar[r] &amp; N_1 \ar[r] &amp; N_2 \ar[r] &amp; 0
    }
    </latex-image>
    </image>
    </figure>
        <p>
          in which the rows are exact,
          there is a canonical map <m>\delta: \ker(f_2) \to \coker(f_0)</m> such that the sequence
          <me>
            0 \to \ker(f_0) \to \ker(f_1) \to \ker(f_2) \stackrel{\delta}{\to} \coker(f_0) \to \coker(f_1) \to \coker(f_2) \to 0
          </me>
          is exact.
        </p>
      </statement>
    </lemma>
    <p>
      One important consequence of the long exact sequence is that if
      <m>0 \to M' \to M \to M'' \to 0</m> is a short exact sequence of <m>G</m>-modules and <m>H^1(G, M') = 0</m>,
      then <m>0 \to (M')^G \to M^G \to (M'')^G \to 0</m> is also exact.
    </p>
    <p>
      More abstract nonsense:
      <ul>
        <li>
          <p>
            If <m>0 \to M' \to M \to M'' \to 0</m> is a short exact sequence of <m>G</m>-modules and <m>H^i(G, M) = 0</m> for all <m>i>0</m>,
            then the connecting homomorphisms in the long exact sequence induce isomorphisms <m>H^i(G, M'') \to H^{i+1}(G, M')</m> for all <m>i > 0</m>
            (and a surjection for <m>i=0</m>).
            This sometimes allows one to prove general facts by proving them first for <m>H^0</m>,
            where they have a direct interpretation, then
            <q>dimension shifting</q>; however, getting from <m>H^0</m> to <m>H^1</m> typically requires some extra attention.
          </p>
        </li>
        <li>
          <p>
            If <m>M</m> is an injective <m>G</m>-module,
            then <m>H^i(G,M) = 0</m> for all <m>i>0</m>.
            (Use <m>0 \to M \to M \to 0 \to \cdots</m> as an injective resolution.)
            This fact has a sort of converse: see next bullet.
          </p>
        </li>
        <li>
          <p>
            We say <m>M</m> is <term>acyclic</term>
            if <m>H^i(G,M) =0</m> for all <m>i>0</m>;
            so in particular, injective <m>G</m>-modules are acyclic.
            It turns out that we can replace the injective resolution in the definition by an acyclic resolution for the purposes of doing a computation;
            see exercises.
          </p>
        </li>
      </ul>
    </p>
    <p>
      Of course, the abstract nature of the proofs so far gives us almost no insight into what the objects are that we've just constructed.
      We'll remedy that next time by giving more concrete descriptions that one can actually compute with.
    </p>
  </subsection>
  <exercises>
    <title>Exercises</title>
      <exercise>
        <statement>
          Let <m>G</m> be the one-element group.
          Show that a <m>G</m>-module (i.e., abelian group) is injective if and only if it is divisible,
          i.e., the map <m>x \mapsto nx</m> is surjective for any nonzero integer <m>n</m>.
        </statement>
        <hint>
          You'll need Zorn's lemma or equivalent in one direction.
        </hint>
      </exercise>
      <exercise>
        <statement>
          Let <m>A</m> be an abelian group,
          regarded as a <m>G</m>-module for <m>G</m> the trivial group.
          Prove that <m>A</m> can be embedded in an injective <m>G</m>-module.
        </statement>
      </exercise>
      <exercise>
        <statement>
          Prove <xref ref="L_enough_injectives">Lemma</xref>.
        </statement>
        <hint>
          For <m>M</m> a <m>G</m>-module,
          the previous exercises show that the underlying abelian group of <m>M</m> embeds into a divisible group <m>N</m>.
          Now map <m>M</m> into <m>\Hom_{\ZZ}(\ZZ[G], N)</m> and check that the latter is an injective <m>G</m>-module.
        </hint>
      </exercise>
      <exercise>
        <statement>
          Prove <xref ref="L_injective_resolutions_to_cohomology_maps">Lemma</xref>,
          following the sketch given.
        </statement>
        <hint>
          Construct <m>g_i</m> given <m>f_{i-1}</m> and <m>g_{i-1}</m>,
          using that the <m>J</m>'s are injective <m>G</m>-modules.
        </hint>
      </exercise>
      <exercise>
        <statement>
          Prove that if <m>0 \to M \to M_0 \to M_1 \to \cdots</m> is an exact sequence of <m>G</m>-modules and each <m>M_i</m> is acyclic,
          then the cohomology groups of the complex
          <m>0 \to M_0^G \to M_1^G \to \cdots</m> coincide with <m>H^i(G, M)</m>.
        </statement>
        <hint>
          Construct the canonical long exact sequence from the exact sequence
          <me>
            0 \to M \to M_0 \to M_0/M \to 0
          </me>,
          then do dimension shifting using the fact that
          <me>
            0 \to M_0/M \to M_1 \to M_2 \to \cdots
          </me>
          is again exact.
          Don't forget to be careful about <m>H^1</m>!)
        </hint>
      </exercise>
  </exercises>
</section>
