<section xml:id="sec_hilbert">
  <title>The Hilbert class field</title>
  <introduction>
    <paragraphs>
      <title>Reference</title>
      <p>
        Milne, Introduction; Neukirch, VI.6.
      </p>
    </paragraphs>
  </introduction>
  <subsection>
    <p>
      Recall that the field <m>\QQ</m> has no extensions which are everywhere unramified
      (<xref ref="T_Minkowski">Theorem</xref>).
      This is quite definitely not true of other number fields;
      we begin with an example illustrating this.
    </p>
    <example>
    <title>An unramified extension of a number field</title>
    <p>
      In the number field <m>K = \QQ(\sqrt{-5})</m>,
      the ring of integers is <m>\ZZ[\sqrt{-5}]</m> and the ideal <m>(2)</m> factors as <m>\gothp^2</m>,
      where the ideal <m>\gothp = (2, 1 + \sqrt{-5})</m> is not principal.
    </p>
    <p>
      Now let's see what happens when we adjoin a square root of <m>-1</m>,
      obtaining <m>L = \QQ(\sqrt{-5}, \sqrt{-1})</m>.
      The extension <m>\QQ(\sqrt{-1})/\QQ</m> only ramifies over 2, so <m>L/K</m> can only be ramified over <m>\gothp</m>.
      On the other hand, if we write
      <m>L = K(\alpha)</m> where <m>\alpha = (1 + \sqrt{5})/2</m>,
      then modulo <m>\gothp</m> the minimal polynomial <m>x^2-x-1</m> of <m>\alpha</m> remains irreducible,
      so <m>\gothp</m> is unramified
      (and not split)
      in <m>L</m>.
    </p>
    </example>
    <p>
      We've now seen that <m>\QQ(\sqrt{-5})</m> admits both a nonprincipal ideal and an unramified abelian extension.
      It turns out these are not unrelated events.
      Caution: until further notice, the phrase
      <q><m>L/K</m> is unramified</q>
      will mean that <m>L/K</m> is unramified over all finite places in the usual sense,
      <em>and</em> that every real embedding of <m>K</m> extends to a real embedding of <m>L</m>.
      (Get used to this.
      The real and complex embeddings of a number field will be treated like primes consistently throughout this text.)
    </p>
    <theorem xml:id="T_Hilbert_class_field">
      <statement>
        <p>
          Let <m>L</m> be the maximal unramified abelian extension of a number field <m>K</m>.
          Then <m>L/K</m> is finite,
          and its Galois group is isomorphic to the ideal class group <m>\Cl(K)</m> of <m>K</m>.
        </p>
      </statement>
    </theorem>
    <p>
      In fact, there is a canonical isomorphism,
      given by the Artin reciprocity law.
      We'll see this a bit later.
      The field <m>L</m> is called the
      <term>Hilbert class field</term> of <m>K</m>.
    </p>
    <p>
      Warning: there can be infinite unramified
      <em>nonabelian</em> extensions.
      In fact, Golod and Shafarevich used unramified abelian extensions to construct these!
      Namely, starting from a number field <m>K = K_0</m>,
      let <m>K_1</m> be the Hilbert class field of <m>K_0</m>,
      let <m>K_2</m> be the Hilbert class field of <m>K_1</m>,
      and so on.
      Then <m>K_i</m> is an unramified but not necessarily abelian extension of <m>K_0</m>,
      and for a suitable choice of <m>K_0</m>,
      <m>[K_i:K_0]</m> can be unbounded.
      (See Cassels-Frohlich for more discussion.)
    </p>
  </subsection>
  <exercises>
    <title>Exercises</title>
      <exercise>
        <statement>
          Let <m>K</m> be an imaginary quadratic extension of <m>\QQ</m> in which <m>t</m> finite primes ramify.
          Assuming <xref ref="T_Hilbert_class_field">Theorem</xref>,
          prove that <m>\#(\Cl(K)/2\Cl(K)) = 2^{t-1}</m>;
          this recovers a theorem of Gauss originally proved using binary quadratic forms.
        </statement>
        <hint>
          If an odd prime <m>p</m> ramifies in <m>K</m>,
          show that <m>K(\sqrt{p^*})/K</m> is unramified for <m>p^* = (-1)^{(p-1)/2} p</m>;
          if 2 ramifies in <m>K</m>,
          show that <m>K(p^*)/K</m> is unramified for one of <m>p^* = -1, 2, -2</m>.
        </hint>
      </exercise>
      <exercise>
        <statement>
          Give an example, using a real quadratic field, to illustrate that:
          <ol>
            <li>
              <p>
                <xref ref="T_Hilbert_class_field">Theorem</xref>
                fails if we don't require the extensions to be unramified above the real place;
              </p>
            </li>
            <li>
              <p>
                the previous exercise fails for real quadratic fields.
              </p>
            </li>
          </ol>
        </statement>
      </exercise>
      <exercise>
        <statement>
          Prove that Exercise<nbsp/>1 extends to real quadratic fields if one replaces the class group by the
          <term>narrow class group</term>,
          in which you only mod out by principal ideals having a totally positive generator.
          This gives an example of a <term>ray class group</term>;
          more on those in the next chapter.
        </statement>
      </exercise>
      <exercise>
        <statement>
          The field <m>\QQ(\sqrt{-23})</m> admits an ideal of order 3 in the class group and an unramified abelian extension of degree 3.
          Find both.
        </statement>
        <hint>
          The extension contains a cubic field of discriminant -23.
        </hint>
      </exercise>
      <exercise>
        <statement>
          Let <m>L/K</m> be an extension of number fields admitting no nontrivial abelian subextension <m>M/K</m> which is everywhere
          unramified (including at archimedean places). Assuming <xref ref="T_Hilbert_class_field">Theorem</xref>, prove
          that the class number of <m>K</m> divides the class number of <m>L</m>.
        </statement>
      </exercise>
      <exercise>
        <statement>
          A number field <m>K</m> is called a <term>CM field</term> if it is a totally complex quadratic extension of a totally real number field
          <m>K_+</m>. Using the previous exercise, show that the class number of <m>K_+</m> divides the class number of <m>K</m>. The ratio is 
          called the <term>relative class number</term>.
        </statement>
      </exercise>
      <exercise>
        <statement>
        Here is an easy way to generate nonabelian unramified extensions. 
        Let <m>K</m> be a number field of degree <m>n</m> with Galois group <m>S_n</m> whose discriminant <m>D</m> is squarefree.
        Prove that the Galois closure of <m>K</m> is unramified over all finite places of <m>\QQ(\sqrt{D})</m>.
        </statement>
      </exercise>
  </exercises>
</section>
